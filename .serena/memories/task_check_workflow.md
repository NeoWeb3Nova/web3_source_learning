# 任务检查流程 - 快速参考

## 🚨 开始任何新任务前必须执行的检查流程

### 第一步：检查任务状态标记
```
工具：mcp_serena_search_for_pattern
参数：
- relative_path: .kiro/specs/web3-defi-vocab-battle/tasks.md
- substring_pattern: "- \[x\] \d+\."

目的：确认上一个任务在tasks.md中已标记为完成 [x]
如果未标记：立即停止，不得开始新任务
```

### 第二步：查找任务完成记录
```
工具：mcp_serena_list_memories
目的：查看是否有上一个任务的完成记录

然后：mcp_serena_read_memory
参数：memory_file_name: task_N_*_completion
目的：了解上一个任务应该完成的具体内容
```

### 第三步：验证文件存在性
```
工具：mcp_serena_find_file
参数：
- relative_path: src
- file_mask: 上一个任务应该创建的文件模式

目的：确认上一个任务创建的所有文件都存在
如果文件缺失：必须先创建缺失文件
```

### 第四步：检查代码实现
```
工具：mcp_serena_get_symbols_overview
参数：relative_path: 上一个任务的关键文件

然后：mcp_serena_find_symbol
参数：
- name_path: 关键符号名称
- include_body: true
- relative_path: 文件路径

目的：验证核心功能是否正确实现
```

### 第五步：功能完整性检查
```
检查项目：
1. 所有要求的功能是否都已实现
2. 代码是否能正常编译（无TypeScript错误）
3. 是否有未完成的TODO或FIXME
4. 组件导出是否正确
5. 类型定义是否完整
```

### 第六步：记录检查结果
```
工具：mcp_serena_write_memory
参数：
- memory_name: task_N_completion_check
- content: 详细的检查结果

内容应包括：
- 检查的任务编号和名称
- 检查发现的问题（如有）
- 补完的内容（如有）
- 确认可以开始新任务的声明
```

## 🔍 常见检查项目清单

### 任务1-5：基础功能检查
- [ ] 项目配置文件是否正确
- [ ] 基础组件是否创建
- [ ] 类型定义是否完整
- [ ] 导入导出是否正确

### 任务6-10：核心功能检查
- [ ] 数据服务是否实现
- [ ] API集成是否正常
- [ ] 组件功能是否完整
- [ ] 状态管理是否正确

### 任务11-15：高级功能检查
- [ ] 响应式设计是否实现
- [ ] 主题系统是否配置
- [ ] 性能优化是否到位
- [ ] 错误处理是否完善

### 任务16-20：质量和部署检查
- [ ] 测试是否通过
- [ ] 代码质量是否达标
- [ ] 部署配置是否正确
- [ ] 文档是否完整

## ❌ 发现问题时的处理流程

### 如果任务状态未标记完成：
1. 立即停止当前操作
2. 返回完成上一个任务
3. 标记任务状态为完成
4. 重新开始检查流程

### 如果文件缺失：
1. 使用serena工具创建缺失文件
2. 实现缺失的功能
3. 更新相关导入导出
4. 重新进行完整性检查

### 如果功能不完整：
1. 列出具体缺失的功能
2. 使用serena工具补完功能
3. 验证功能正确性
4. 更新任务完成记录

### 如果有编译错误：
1. 使用serena工具修复类型错误
2. 确保所有导入路径正确
3. 验证组件Props定义
4. 重新检查编译状态

## 📋 检查结果记录模板

```markdown
# 任务N完成检查结果

## 检查时间
[当前时间]

## 检查的任务
- 任务编号：N
- 任务名称：[任务名称]
- 任务要求：[简要描述]

## 检查结果

### 任务状态检查
- [ ] tasks.md中已标记为完成 [x]
- [ ] 内存中有完成记录

### 文件存在性检查
- [ ] 文件1：[路径] - 存在/缺失
- [ ] 文件2：[路径] - 存在/缺失
- [ ] ...

### 代码实现检查
- [ ] 核心组件：[组件名] - 完整/不完整
- [ ] 关键功能：[功能名] - 实现/未实现
- [ ] 类型定义：完整/缺失
- [ ] 导入导出：正确/错误

### 发现的问题
1. [问题描述]
2. [问题描述]
...

### 补完的内容
1. [补完内容描述]
2. [补完内容描述]
...

## 最终结论
- [ ] 上一个任务已完全完成，可以开始新任务
- [ ] 发现问题已全部解决，可以开始新任务
- [ ] 仍有问题未解决，不能开始新任务

## 下一步行动
[如果可以开始新任务，说明准备开始的任务]
[如果不能开始，说明需要解决的问题]
```

## 🚫 绝对禁止的行为

1. **跳过任何检查步骤**：每个步骤都是必须的
2. **发现问题后继续**：必须先解决问题
3. **不记录检查结果**：必须详细记录
4. **假装检查完成**：必须真实检查
5. **绕过serena工具**：必须使用serena进行检查

## 💡 检查技巧

1. **使用精确的搜索模式**：避免误匹配
2. **逐个验证文件**：不要批量假设
3. **检查符号完整性**：确保实现完整
4. **验证类型定义**：确保TypeScript无错误
5. **测试基本功能**：确保代码能运行

遵循这个检查流程，确保每个任务都建立在坚实的基础上！